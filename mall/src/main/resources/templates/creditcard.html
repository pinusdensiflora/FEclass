<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>



</head>
<body>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


<script src="https://cdn.iamport.kr/v1/iamport.js"></script>


<button type="button" class="btn btn-danger" onclick=requestpay()>유료회원결제 200원</button>


<script>

IMP.init("imp27043632"); // 예: 'imp00000000'

function requestpay(){
	
	IMP.request_pay(
			  {
			    pg: "danal_tpay", //상점 값 생략??
			    pay_method: "card",
			    merchant_uid: "Dawn" + uuidv4(), // 주문 고유 번호(uuid) 항상 다른 번호로 사용해야함, 중복이 불가능. 항상 다른 값을 만들어서 던져준다
			    name: "노르웨이 회전 의자",
			    amount: 200, //결제가격
			    buyer_email: "gildong@gmail.com",
			    buyer_name: "홍길동",
			    buyer_tel: "010-4242-4242",
			    buyer_addr: "서울특별시 강남구 신사동",
			    buyer_postcode: "01181",
			  },
			  function (response) {
			    // 결제 종료 시 호출되는 콜백 함수
			    // response.imp_uid 값으로 결제 단건조회 API를 호출하여 결제 결과를 확인하고,
			    // 결제 결과를 처리하는 로직을 작성합니다.
			    
			    alert("결제 성공");
			  },
			);
	
}



function uuidv4() {
	  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
	    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
	  );
	}

	console.log(uuidv4());



</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>